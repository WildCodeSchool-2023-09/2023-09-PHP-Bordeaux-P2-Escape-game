{% extends 'layout.html.twig' %} 

{% block title %}Scene{% endblock %}

{% block stylesheet %}
<link rel="stylesheet" href="/assets/css/navbar.css">
    <link rel="stylesheet" href="/assets/css/scene.css">
    <link rel="stylesheet" href="/assets/css/footer.css">
{% endblock %}

{% block content %}


    <div class="layout">

        <div class="ImgDialogues">
            <div class="ImageLightOff">

                <map name="Eleccompteur">
                    <area 
                    shape="circle" 
                    coords="346,90,9" 
                    alt="Tableau électrique"
                    href="/enigme?id=1"/>
                </map>
                <img usemap="#Eleccompteur" src="assets/images/Scene1_LumiereEteinte_416x224_pastille.png" alt="Image en mode horreur d'une porte dans l'obscurité, la lumière est éteinte" onmouseover="this.src='assets/images/Scene1_LumiereEteinte_416x224_pastille.png'" onmouseout="this.src='assets/images/Scene1_LumiereEteinte_416x224_pastilleHover.png'" />
            </div>

            <div class="Dialogues">
                <div id="typedtext">
                </div>
            </div>
        </div>

        <div class="tools">
            <div class="pseudo">
                JojoPok
                <!-- fonction qui récupère le pseudo du joueur lorsque celui-ci est connecté à sa session-->
            </div>

            <div class="timer">
                60:00
                <!-- fonction timer -->
            </div>

            <div class="inventory">
            </div>

           <div class="indice">
                <img src="/assets/images/ampoule_bw.png" alt="ampoule en noir et blanc" onmouseover="this.src='/assets/images/ampoule_color.png'" onmouseout="this.src='/assets/images/ampoule_bw.png'"/>    
            </div>
        </div>
    </div>


{% endblock %}

{% block javascript %}
    <script>
            // Animation en JS pour que les dialogues s'écrivent comme uen "machine à écrire" : le code simule la frappe du texte lettre par lettre.
    // à voir si on utilise plutôt la librairie Sheperdjs pour faire cette animation
   
        // on initialise les différentes variables pour suivre la frappe progressive du texte :
    var iIndex = 0; 
    var iTextPos = 0;
    var aText = [
                    "Il n’y a plus de lumière, je ne vois plus rien! Comment faire ? Il doit bien y avoir une solution pour rallumer la lumière."
                ]; 
    var iArrLength = aText[0].length; 
    var iScrollAt = 20;
    var iRow = 0; 
    var sContents = ""; 
    var iSpeed = 50;
   
    // La fonction typewriter() est responsable de faire défiler et afficher le texte sur la page. 
    
    function typewriter() 
    {
            sContents = ' ';
            iRow = Math.max(0, iIndex - iScrollAt);
            var destination = document.getElementById("typedtext");
            
            while (iRow < iIndex) 
            {
                sContents += aText[iRow++] + '<br />';
            }
            destination.innerHTML = sContents + aText[iIndex].substring(0, iTextPos) + "_";
            if (iTextPos++ == iArrLength) 
            {
                iTextPos = 0;
                iIndex++;
                if (iIndex != aText.length) 
                {
                    iArrLength = aText[iIndex].length;
                    setTimeout(typewriter, 500);
                }
            } else {
                setTimeout(typewriter, iSpeed);
            }
        }
        
                
    typewriter();
                    
    </script> 
{#    <script type="text/javascript" src="/assets/js/dialogs.js"> #}
{% endblock %}